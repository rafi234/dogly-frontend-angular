<div class="d-flex justify-content-between my-4 px-5">
  <h1 *ngIf="queryParam === 'meeting' || queryParam === 'admin'" class="mb-4">Meetings</h1>
  <h1 *ngIf="queryParam === 'user'" class="mb-4">Meetings added by you</h1>
  <button *ngIf="matchRole(['ROLE_USER'])" class="btn btn-primary px-4 h-50" (click)="openAddMeeting('add')">Add meeting</button>
  <button *ngIf="!matchRole(['ROLE_USER'])" class="btn btn-primary px-4 h-50" data-mdb-toggle="modal"
          data-mdb-target="#staticBackdrop">Add meeting
  </button>
</div>

<div class="container">



  <div class="row col-12 g-3 justify-content-center">
    <div *ngIf="meetings.length == 0"><h1>No meetings created yet!</h1></div>
    <div *ngIf="meetings.length > 0">
      <div class="card p-0 mb-4 bg-light" style="max-width: 1100px; min-height: 15em" *ngFor="let meeting of meetings">
        <div class="row g-0">
          <div class="col-md-4">
            <img
              src="{{ meeting.dogPark?.imgUrl }}"
              alt="Park Picture"
              class="card-img h-100"
            />
          </div>
          <div class="col-md-7 bg-light">
            <div class="card-body">
              <h5 class="card-title">{{ meeting.title }}</h5>
              <p class="card-text" id="description">
                {{ meeting.description }}
              </p>
              <p class="card-text">
                Place: {{ meeting.dogPark?.location }} in {{ meeting.dogPark?.city }}
                <a class="text-warning text-decoration-underline" target="_blank"
                   href="{{ meeting.dogPark?.url }}"><small>more</small></a>
              </p>
              <div class="card-footer text-start m-0 p-0 d-flex">
                <p class="mt-3 mb-1"><small class="text-muted ">Added {{ meeting.addedAt | timeSince }} ago
                  by {{ meeting.user?.name }} {{ meeting.user?.surname }}</small></p>
                <div id="buttons"
                     class="container d-flex justify-content-around align-items-center flex-md-row flex-column">
                  <button [hidden]="!matchRole(['ROLE_USER'])" class="btn btn-primary m-1"
                          (click)="onClick(meeting.id, 'going')">
                    Going {{ meeting.goingClicked?.length }}</button>
                  <button [hidden]="!matchRole(['ROLE_USER'])" class="btn btn-primary m-1"
                          (click)="onClick(meeting.id, 'interested')">
                    Interested {{ meeting.interestedClicked?.length }}</button>

                  <button [hidden]="matchRole(['ROLE_USER'])" class="btn btn-primary m-1"
                          data-mdb-toggle="modal" data-mdb-target="#staticBackdrop">
                    Going {{ meeting.goingClicked?.length }}</button>
                  <button [hidden]="matchRole(['ROLE_USER'])" class="btn btn-primary m-1"
                          data-mdb-toggle="modal" data-mdb-target="#staticBackdrop">
                    Interested {{ meeting.interestedClicked?.length }}</button>

                </div>
              </div>
            </div>
          </div>
          <div *ngIf="queryParam === 'admin' || queryParam === 'user'"
               class="col-md-1 d-flex flex-column justify-content-around align-items-center bg-secondary rounded-3 ">
            <button type="button" class="btn btn-primary w-50 px-2 m-2" (click)="openAddMeeting('edit', meeting)">
              <i class="fas fa-edit fa-lg"></i>
            </button>
            <button type="button" class="btn btn-danger w-50 px-2 m-2" (click)="deleteMeeting(meeting.id)">
              <i class="fas fa-trash-alt fa-lg"></i>
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<app-forbidden-side></app-forbidden-side>
